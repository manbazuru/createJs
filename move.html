<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>CreateJS基本編 -expand,promote-</title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
<h1>CreateJS基本編 斜めや円状に動かしてみる</h1>
<div>
<p>x = x + 移動距離 * Math.cos(ラジアン角度);</p>
<p>y = y + 移動距離 * Math.sin(ラジアン角度);</p>
<p>ラジアンに変換 degree * Math.PI() / 180;(2 * Math.PI * degree / 360;)</p>
<canvas id="canvas" width="1000" height="500"></canvas>
</div>

<script>
// 必要な変数を定義
var canvas;
var stage;
var circle;
var count;

// クラス生成
var Initialize = function() {
    this.Shape_constructor();
};
createjs.extend(Initialize,createjs.Shape);

// 円を生成する子クラス (色、初期位置X、初期位置Y、半径のサイズ)
Initialize.prototype.circle = function(color,x,y,size) {
    this.graphics
        .beginFill(color)
        .drawCircle(x,y,size);
    this.x = x;
    this.y = y;
};
// アニメーション用の子クラス (X座標、Y座標、移動距離、ラジアン角度)
Initialize.prototype.move = function(x,y,r,degree) {
    this.x = x + r * Math.cos(degree);
    this.y = y + r * Math.sin(degree);
};
createjs.promote(Initialize,'Shape');

// 初期化
var init = function() {
    canvas = document.getElementById('canvas');
    stage = new createjs.Stage(canvas);
    stage.x = canvas.width / 2;
    stage.y = canvas.height / 2;

    circle = new Initialize();
    circle.circle('skyblue',0,0,50);

    stage.addChild(circle);

    count = 0;

    createjs.Ticker.addEventListener('tick',mytick);
    createjs.Ticker.timingMode = createjs.Ticker.RAF;
};

// tickイベント
function mytick() {
    // xとyをカウントアップし、移動距離をカウントアップさせることで斜めに移動する
    /* circle.move(count,-count,count,0); */

    // ラジアン角度をカウントアップさせると円状に移動する
    /* circle.move(0,0,60,calcRadian(count)); */

    // 移動距離とラジアン角度をカウントアップすると渦巻き状に。角度を掛け算すると小さく、割り算で大きく回転する
    circle.move(0,0,count / 2,calcRadian(count * 2));

    stage.update();

    count++;
}

// ラジアンに変換する関数
function calcRadian(degree) {
    degree = degree * Math.PI / 180;
    return degree;
}

init();
</script>
</body>
</html>